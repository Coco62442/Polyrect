"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[108],{108:function(e,o,t){t.r(o),t.d(o,{default:function(){return w}});var r=t(3396),l=t(9242);const n=(0,r.Uk)("Ajouter des Notes"),s=(0,r.Uk)("Modifier des Notes"),a=(0,r.Uk)("Ajouter des Absences"),u=(0,r.Uk)("Modifier des Absences"),i=(0,r.Uk)("Mettre à jour votre profil"),p={class:"container"},d=(0,r._)("h4",null,"Formulaire pour mettre à jour tes informations:",-1),f=(0,r._)("label",{for:"emailPut"},"Email",-1),m=(0,r._)("label",{for:"mdpPut"},"Mot de passe",-1),c=(0,r._)("button",{type:"submit"},"Mettre à jour",-1);function h(e,o,t,h,P,_){const b=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("nav",null,[(0,r.Wm)(b,{to:"/loginProf"},{default:(0,r.w5)((()=>[n])),_:1}),(0,r.Wm)(b,{to:"/modifNote"},{default:(0,r.w5)((()=>[s])),_:1}),(0,r.Wm)(b,{to:"/ajoutAbsence"},{default:(0,r.w5)((()=>[a])),_:1}),(0,r.Wm)(b,{to:"/modifAbsence"},{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(b,{to:"/profilProf"},{default:(0,r.w5)((()=>[i])),_:1})]),(0,r._)("button",{onClick:o[0]||(o[0]=e=>_.profLogout()),class:"deconnexion"},"Déconnexion"),(0,r._)("div",p,[d,(0,r._)("form",{onSubmit:o[3]||(o[3]=(0,l.iM)(((...e)=>_.putProf&&_.putProf(...e)),["prevent"])),class:"form"},[(0,r._)("div",null,[f,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":o[1]||(o[1]=o=>e.emailPut=o),type:"email",placeholder:"Entrer un email"},null,512),[[l.nr,e.emailPut]])]),(0,r._)("div",null,[m,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":o[2]||(o[2]=o=>e.mdpPut=o),type:"password",placeholder:"Entrer un mot de passe"},null,512),[[l.nr,e.mdpPut]])]),c],32)])])}const P=top.glob,_=P+"prof";var b={name:"profProfil",data:()=>({id:localStorage.getItem("idProf"),emailPut:null,mdpPut:null,prof:[],error:""}),methods:{profLogout(){localStorage.removeItem("tokenProf"),localStorage.removeItem("idProf"),localStorage.clear(),this.$router.push("/prof")},async putProf(){await fetch(_+"/"+this.id,{method:"PUT",body:JSON.stringify({email:this.emailPut,mdp:this.mdpPut}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}}).then((e=>{e.ok?e.json().then((e=>{if(e.details){const o=e.details.map((e=>e.prof)).join(". ");this.error=o}else this.error="",this.showProfForm=!1,this.profs.push(e)})):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):alert("Les informations n'ont pas pu être mises à jour")})).catch((e=>{console.log(e)}))}}},g=t(89);const k=(0,g.Z)(b,[["render",h]]);var w=k}}]);
//# sourceMappingURL=108.69ee678d.js.map