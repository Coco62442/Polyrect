"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[110],{8110:function(e,t,o){o.r(t),o.d(t,{default:function(){return E}});var n=o(3396),s=o(7139),l=o(9242);const a=e=>((0,n.dD)("data-v-80f25a04"),e=e(),(0,n.Cn)(),e),r=(0,n.Uk)("Ajouter des Notes"),i=(0,n.Uk)("Modifier des Notes"),u=(0,n.Uk)("Ajouter des Absences"),c=(0,n.Uk)("Modifier des Absences"),p=(0,n.Uk)("Mettre à jour votre profil"),d=a((()=>(0,n._)("hr",null,null,-1))),h=["onClick"],m=["onSubmit"],f=["onUpdate:modelValue"],g=["onUpdate:modelValue"],w=a((()=>(0,n._)("button",{class:"input",type:"submit"},"Mettre à jour",-1))),y=["onClick"];function v(e,t,o,a,v,k){const _=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("nav",null,[(0,n.Wm)(_,{to:"/loginProf"},{default:(0,n.w5)((()=>[r])),_:1}),(0,n.Wm)(_,{to:"/modifNote"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(_,{to:"/ajoutAbsence"},{default:(0,n.w5)((()=>[u])),_:1}),(0,n.Wm)(_,{to:"/modifAbsence"},{default:(0,n.w5)((()=>[c])),_:1}),(0,n.Wm)(_,{to:"/profilProf"},{default:(0,n.w5)((()=>[p])),_:1})]),(0,n._)("button",{onClick:t[0]||(t[0]=e=>k.profLogout()),class:"deconnexion"},"Déconnexion"),d,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.listeEleve,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{key:t._id},[(0,n._)("li",null,[(0,n._)("a",{href:"#",onClick:e=>k.getAllNotesByEleve(t._id,o)},[(0,n._)("p",null,(0,s.zw)(t.prenom)+" "+(0,s.zw)(t.nom),1)],8,h),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.notesMat,(s=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{key:s},[(0,n._)("form",{onSubmit:(0,l.iM)((e=>k.putNote(s._id,s.note,s.num)),["prevent"])},[(0,n._)("div",null,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e=>s.note=e,class:"input",type:"number",min:"0",max:"20"},null,8,f),[[l.nr,s.note]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e=>s.num=e,class:"input",type:"number",min:"0"},null,8,g),[[l.nr,s.num]])]),w],40,m),(0,n._)("button",{onClick:e=>k.delNote(s._id,t._id,o),class:"input",type:"submit"},"Supprimer la note",8,y)])),[[l.F8,e.showNotes[o]]]))),128))])])))),128))])}const k="https://polyrecte-serveur.herokuapp.com/",_=k+"eleve",b=k+"matiere",N=k+"note";var M={name:"modifNote",data:()=>({idProf:localStorage.getItem("id"),idMat:String,listeEleve:[],notesMat:[],showNotes:[]}),beforeMount(){this.getListeEleves().then((()=>{this.notShowMessage()})),this.getIdMat()},methods:{profLogout(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.clear(),this.$router.push("/prof")},async getListeEleves(){try{let e=await fetch(_,{headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}});if(e.ok){let t=await e.json();this.listeEleve=t.eleves}else 401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):(console.log("Erreur du serveur"),alert("Le chargement des donnés n'a pas pu être fait"))}catch(e){console.log(e)}},notShowMessage(){for(let e=0;e<this.listeEleve.length;e++)this.showNotes[e]=!1},async getIdMat(){try{let e=await fetch(b+"/"+this.idProf,{headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}});if(e.ok){let t=await e.json();this.idMat=t.mat._id}else 401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):(console.log("Erreur du serveur"),alert("Le chargement des donnés n'a pas pu être fait"))}catch(e){console.log(e)}},async getAllNotesByEleve(e,t){try{this.notShowMessage();let o=await fetch(N+"/note/"+e+"/"+this.idMat,{headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}});if(o.ok){let e=await o.json();this.notesMat=e.notes,this.showNotes[t]=!0}else 401==o.status&&(alert("Vous n'êtes plus connecté"),this.$router.push("/prof"))}catch{console.log("err")}return!1},async putNote(e,t,o){console.log(e,t,o),await fetch(N+"/"+e,{method:"PUT",body:JSON.stringify({note:t,num:o}),headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}}).then((e=>{e.ok?alert("Note mis à jour"):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):alert("Problème lors de la mise à jour de la note")})).catch((e=>{console.log(e)}))},async delNote(e,t,o){const n=confirm("Voulez-vous confirmez la supression?");if(n)try{let n=await fetch(N+"/"+e,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}});n.ok?(alert("Note supprimée"),this.getAllNotesByEleve(t,o)):401==n.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):alert("Problème lors de la supression de la note")}catch(s){console.log(s)}}}},S=o(89);const j=(0,S.Z)(M,[["render",v],["__scopeId","data-v-80f25a04"]]);var E=j}}]);
//# sourceMappingURL=110.9f409634.js.map