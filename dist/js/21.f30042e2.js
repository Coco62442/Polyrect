"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[21],{6021:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var o=n(3396),a=n(9242);const l=t=>((0,o.dD)("data-v-a2e72892"),t=t(),(0,o.Cn)(),t),i=(0,o.Uk)("Gestion de la base de donnée"),r=(0,o.Uk)("Mettre à jour votre profil"),u=l((()=>(0,o._)("hr",null,null,-1))),d={class:"container"},m=l((()=>(0,o._)("h4",null,"Formulaire pour mettre à jour tes informations:",-1))),s=l((()=>(0,o._)("button",{type:"submit"},"Mettre à jour",-1)));function p(t,e,n,l,p,c){const h=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",null,[(0,o.Wm)(h,{to:"/loginAdmin"},{default:(0,o.w5)((()=>[i])),_:1}),(0,o.Wm)(h,{to:"/profilAdmin"},{default:(0,o.w5)((()=>[r])),_:1})]),(0,o._)("button",{onClick:e[0]||(e[0]=t=>c.adminLogout()),class:"deconnexion"},"Déconnexion"),u,(0,o._)("div",d,[(0,o._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)(((...t)=>c.putAdmin&&c.putAdmin(...t)),["prevent"]))},[m,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.emailPut=e),type:"email",placeholder:"Entrer un email"},null,512),[[a.nr,t.emailPut]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.mdpPut=e),type:"password",placeholder:"Entrer un mot de passe"},null,512),[[a.nr,t.mdpPut]]),s],32)])])}const c=top.glob,h=c+"admin";var f={name:"admin",data:()=>({idAdmin:localStorage.getItem("idAdmin"),emailPut:null,mdpPut:null}),methods:{adminLogout(){localStorage.removeItem("tokenAdmin"),localStorage.removeItem("idAdmin"),localStorage.clear(),this.$router.push("/admin")},async putAdmin(){await fetch(h+"/"+this.idAdmin,{method:"PUT",body:JSON.stringify({email:this.emailPut,mdp:this.mdpPut}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((t=>{t.ok?alert("Informations mises à jour!"):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la mise à jour de l'administrateur")})).catch((t=>{console.log(t)}))}}},g=n(89);const _=(0,g.Z)(f,[["render",p],["__scopeId","data-v-a2e72892"]]);var v=_}}]);
//# sourceMappingURL=21.f30042e2.js.map