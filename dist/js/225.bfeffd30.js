"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[225],{6225:function(t,e,o){o.r(e),o.d(e,{default:function(){return P}});var n=o(3396),s=o(7139),l=o(9242);const a=(0,n.Uk)("Ajouter des Notes"),r=(0,n.Uk)("Modifier des Notes"),i=(0,n.Uk)("Ajouter des Absences"),u=(0,n.Uk)("Modifier des Absences"),c=(0,n.Uk)("Mettre à jour votre profil"),p=(0,n._)("hr",null,null,-1),d=["onClick"],g=["onSubmit"],h=(0,n._)("label",null,"Changer la note: ",-1),f=["onUpdate:modelValue"],m=(0,n._)("label",null,"Changer le numéro de contrôle: ",-1),b=["onUpdate:modelValue"],w=(0,n._)("button",{class:"input",type:"submit"},"Mettre à jour",-1),y=["onClick"];function k(t,e,o,k,v,_){const E=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("nav",null,[(0,n.Wm)(E,{to:"/loginProf"},{default:(0,n.w5)((()=>[a])),_:1}),(0,n.Wm)(E,{to:"/modifNote"},{default:(0,n.w5)((()=>[r])),_:1}),(0,n.Wm)(E,{to:"/ajoutAbsence"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(E,{to:"/modifAbsence"},{default:(0,n.w5)((()=>[u])),_:1}),(0,n.Wm)(E,{to:"/profilProf"},{default:(0,n.w5)((()=>[c])),_:1})]),(0,n._)("button",{onClick:e[0]||(e[0]=t=>_.profLogout()),class:"deconnexion"},"Déconnexion"),p,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.listeEleve,((e,o)=>((0,n.wg)(),(0,n.iD)("div",{key:e._id},[(0,n._)("li",null,[(0,n._)("a",{href:"#",onClick:t=>_.getAllNotesByEleve(e._id,o)},[(0,n._)("p",null,(0,s.zw)(e.prenom)+" "+(0,s.zw)(e.nom),1)],8,d),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.notesMat,(s=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{key:s},[(0,n._)("form",{onSubmit:(0,l.iM)((t=>_.putNote(s._id,s.note,s.num)),["prevent"])},[(0,n._)("div",null,[h,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t=>s.note=t,class:"input",type:"number",min:"0",max:"20"},null,8,f),[[l.nr,s.note]])]),(0,n._)("div",null,[m,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t=>s.num=t,class:"input",type:"number",min:"0"},null,8,b),[[l.nr,s.num]])]),w],40,g),(0,n._)("button",{onClick:t=>_.delNote(s._id,e._id,o),class:"input",type:"submit"},"Supprimer la note",8,y)])),[[l.F8,t.showNotes[o]]]))),128))])])))),128))])}const v=top.glob.serv,_=v+"eleve",E=v+"matiere",N=v+"note";var M={name:"modifNote",data:()=>({idProf:localStorage.getItem("idProf"),idMat:String,listeEleve:[],notesMat:[],showNotes:[]}),beforeMount(){this.getListeEleves().then((()=>{this.notShowMessage()})),this.getIdMat()},methods:{profLogout(){localStorage.removeItem("tokenProf"),localStorage.removeItem("idProf"),localStorage.clear(),this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")},async getListeEleves(){try{let t=await fetch(_,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});if(t.ok){let e=await t.json();this.listeEleve=e.eleves}else 401==t.status?(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")):(console.log("Erreur du serveur"),top.glob.toast("Le chargement des donnés n'a pas pu être fait","warning"))}catch(t){console.log(t),top.glob.toast("Erreur","danger")}},notShowMessage(){for(let t=0;t<this.listeEleve.length;t++)this.showNotes[t]=!1},async getIdMat(){try{let t=await fetch(E+"/"+this.idProf,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});if(t.ok){let e=await t.json();this.idMat=e.mat._id}else 401==t.status?this.$router.push("/prof"):(console.log("Erreur du serveur"),top.glob.toast("Le chargement des donnés n'a pas pu être fait","warning"))}catch(t){console.log(t),top.glob.toast("Erreur","danger")}},async getAllNotesByEleve(t,e){try{this.notShowMessage();let o=await fetch(N+"/note/"+t+"/"+this.idMat,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});if(o.ok){let t=await o.json();this.notesMat=t.notes,this.showNotes[e]=!0}else 401==o.status&&(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info"))}catch{console.log("err"),top.glob.toast("Erreur","danger")}return!1},async putNote(t,e,o){await fetch(N+"/"+t,{method:"PUT",body:JSON.stringify({note:e,num:o}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}}).then((t=>{t.ok?top.glob.toast("Note mis à jour","success"):401==t.status?(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")):top.glob.toast("Problème lors de la mise à jour de la note","warning")})).catch((t=>{console.log(t),top.glob.toast("Erreur","danger")}))},async delNote(t,e,o){const n=confirm("Voulez-vous confirmez la supression?");if(n)try{let n=await fetch(N+"/"+t,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});n.ok?(top.glob.toast("Note supprimée","success"),this.getAllNotesByEleve(e,o)):401==n.status?(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")):top.glob.toast("Problème lors de la supression de la note","warning")}catch(s){console.log(s),top.glob.toast("Erreur","danger")}}}},S=o(89);const j=(0,S.Z)(M,[["render",k]]);var P=j}}]);
//# sourceMappingURL=225.bfeffd30.js.map