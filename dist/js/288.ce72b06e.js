"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[288],{7288:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var l=o(3396),n=o(9242);const r=(0,l.Uk)("Home"),i=(0,l.Uk)("About"),a={class:"container"},u=(0,l._)("h1",null,"Portail Professeur",-1),s=(0,l._)("label",null,[(0,l._)("b",null,"Nom d'utilisateur")],-1),d=(0,l._)("label",null,[(0,l._)("b",null,"Mot de passe")],-1),p=(0,l._)("button",{type:"submit",id:"submit"},"Login",-1);function c(e,t,o,c,m,f){const g=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("nav",null,[(0,l.Wm)(g,{to:"/"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(g,{to:"/about"},{default:(0,l.w5)((()=>[i])),_:1})]),(0,l._)("div",a,[u,(0,l._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)((e=>f.redirect()),["prevent"])),class:"form"},[s,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.loginEmail=t),type:"text",placeholder:"Entrer le nom d'utilisateur",name:"email",required:""},null,512),[[n.nr,e.loginEmail]]),d,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.loginMdp=t),type:"password",placeholder:"Entrer le mot de passe",name:"mdp",required:""},null,512),[[n.nr,e.loginMdp]]),p],32)])])}const m=top.glob.serv,f=m+"prof";var g={name:"homeProf",data:()=>({loginEmail:"",loginMdp:""}),methods:{async redirect(){try{let e=await fetch(f+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.loginEmail,mdp:this.loginMdp})});e.ok?(e=await e.json(),this.$router.push("./loginProf"),top.glob.toast("Vous êtes connecté","info"),localStorage.setItem("idProf",e._id),localStorage.setItem("tokenProf",e.token)):top.glob.toast("Mot de passe ou identifiant incorrect","default")}catch{top.glob.toast("Erreur du serveur")}}}},b=o(89);const h=(0,b.Z)(g,[["render",c]]);var _=h}}]);
//# sourceMappingURL=288.ce72b06e.js.map