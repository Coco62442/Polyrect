"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[30],{30:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var n=l(3396),o=l(9242);const i=(0,n.Uk)("Home"),r=(0,n.Uk)("About"),a={class:"container"},u=(0,n._)("h1",null,"Portail Administrateur",-1),d=(0,n._)("label",null,[(0,n._)("b",null,"Nom d'utilisateur")],-1),s=(0,n._)("label",null,[(0,n._)("b",null,"Mot de passe")],-1),m=(0,n._)("button",{type:"submit",id:"submit"},"Login",-1);function p(e,t,l,p,c,h){const g=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("nav",null,[(0,n.Wm)(g,{to:"/"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(g,{to:"/about"},{default:(0,n.w5)((()=>[r])),_:1})]),(0,n._)("div",a,[u,(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)((e=>h.redirect()),["prevent"])),class:"form"},[d,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.loginEmail=t),type:"text",placeholder:"Entrer le nom d'utilisateur",name:"email",required:""},null,512),[[o.nr,e.loginEmail]]),s,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.loginMdp=t),type:"password",placeholder:"Entrer le mot de passe",name:"mdp",required:""},null,512),[[o.nr,e.loginMdp]]),m],32)])])}const c="https://polyrecte-serveur.herokuapp.com/",h=c+"admin";var g={name:"homeAdmin",data:()=>({loginEmail:"",loginMdp:""}),methods:{async redirect(){try{let e=await fetch(h+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.loginEmail,mdp:this.loginMdp})});e.ok?(e=await e.json(),this.$router.push("./loginAdmin"),localStorage.setItem("id",e._id),localStorage.setItem("token",e.token)):alert("Mot de passe ou identifiant incorrect")}catch{alert("Erreur du serveur")}}}},_=l(89);const b=(0,_.Z)(g,[["render",p]]);var f=b}}]);
//# sourceMappingURL=30.b7c4a3a1.js.map