"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[309],{5309:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var o=l(3396),n=l(9242);const r=(0,o.Uk)("Home"),a=(0,o.Uk)("About"),i={class:"container"},u=(0,o._)("h1",null,"Portail Elève",-1),s=(0,o._)("label",null,[(0,o._)("b",null,"Nom d'utilisateur")],-1),d=(0,o._)("label",null,[(0,o._)("b",null,"Mot de passe")],-1),p=(0,o._)("button",{type:"submit",id:"submit"},"Login",-1);function c(e,t,l,c,m,g){const b=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",null,[(0,o.Wm)(b,{to:"/"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(b,{to:"/about"},{default:(0,o.w5)((()=>[a])),_:1})]),(0,o._)("div",i,[u,(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>g.redirect&&g.redirect(...e)),["prevent"])),class:"form"},[s,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.loginEmail=t),type:"text",placeholder:"Entrer le nom d'utilisateur",name:"email",required:""},null,512),[[n.nr,e.loginEmail]]),d,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.loginMdp=t),type:"password",placeholder:"Entrer le mot de passe",name:"mdp",required:""},null,512),[[n.nr,e.loginMdp]]),p],32)])])}const m=top.glob.serv,g=m+"eleve";var b={name:"home",data:()=>({error:"",eleves:[],eleve:{email:"",prenom:"",nom:"",mdp:""},loginEmail:"",loginMdp:""}),methods:{async redirect(){try{let e=await fetch(g+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.loginEmail,mdp:this.loginMdp})});e.ok?(e=await e.json(),this.$router.push("./loginEleve"),top.glob.toast("Vous êtes connecté","info"),localStorage.clear(),localStorage.setItem("idEleve",e._id),localStorage.setItem("tokenEleve",e.token)):top.glob.toast("Mot de passe ou identifiant incorrect","default")}catch{top.glob.toast("Erreur du serveur","warning")}}}},h=l(89);const v=(0,h.Z)(b,[["render",c]]);var f=v}}]);
//# sourceMappingURL=309.0702706c.js.map