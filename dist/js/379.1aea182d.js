"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[379],{8379:function(t,e,o){o.r(e),o.d(e,{default:function(){return v}});var n=o(3396),a=o(9242);const l=t=>((0,n.dD)("data-v-0320af87"),t=t(),(0,n.Cn)(),t),i=(0,n.Uk)("Gestion de la base de donnée"),r=(0,n.Uk)("Mettre à jour votre profil"),u=l((()=>(0,n._)("hr",null,null,-1))),d={class:"container"},s=l((()=>(0,n._)("h4",null,"Formulaire pour mettre à jour tes informations:",-1))),m=l((()=>(0,n._)("button",{type:"submit"},"Mettre à jour",-1)));function p(t,e,o,l,p,c){const g=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("nav",null,[(0,n.Wm)(g,{to:"/loginAdmin"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(g,{to:"/profilAdmin"},{default:(0,n.w5)((()=>[r])),_:1})]),(0,n._)("button",{onClick:e[0]||(e[0]=t=>c.adminLogout()),class:"deconnexion"},"Déconnexion"),u,(0,n._)("div",d,[(0,n._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)(((...t)=>c.putAdmin&&c.putAdmin(...t)),["prevent"]))},[s,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.emailPut=e),type:"email",placeholder:"Entrer un email"},null,512),[[a.nr,t.emailPut]]),(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.mdpPut=e),type:"password",placeholder:"Entrer un mot de passe"},null,512),[[a.nr,t.mdpPut]]),m],32)])])}const c=top.glob.serv,g=c+"admin";var h={name:"admin",data:()=>({idAdmin:localStorage.getItem("idAdmin"),emailPut:null,mdpPut:null}),methods:{adminLogout(){localStorage.removeItem("tokenAdmin"),localStorage.removeItem("idAdmin"),localStorage.clear(),this.$router.push("/admin"),top.glob.toast("Vous êtes connecté","info")},async putAdmin(){await fetch(g+"/"+this.idAdmin,{method:"PUT",body:JSON.stringify({email:this.emailPut,mdp:this.mdpPut}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((t=>{t.ok?top.glob.toast("Informations mises à jour!","success"):401==t.status?(this.$router.push("/admin"),top.glob.toast("Vous êtes déconnecté","info")):top.glob.toast("Problème lors de la mise à jour de l'administrateur","warning")})).catch((t=>{console.log(t),top.glob.toast("Erreur","danger")}))}}},f=o(89);const b=(0,f.Z)(h,[["render",p],["__scopeId","data-v-0320af87"]]);var v=b}}]);
//# sourceMappingURL=379.1aea182d.js.map