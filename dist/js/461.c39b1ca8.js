"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[461],{2461:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var o=n(3396),a=n(9242);const l=t=>((0,o.dD)("data-v-24ac10c1"),t=t(),(0,o.Cn)(),t),r=(0,o.Uk)("Gestion de la base de donnée"),i=(0,o.Uk)("Mettre à jour votre profil"),u=l((()=>(0,o._)("hr",null,null,-1))),d={class:"container"},m=l((()=>(0,o._)("h4",null,"Formulaire pour mettre à jour tes informations:",-1))),s=l((()=>(0,o._)("button",{type:"submit"},"Mettre à jour",-1)));function c(t,e,n,l,c,p){const h=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",null,[(0,o.Wm)(h,{to:"/loginAdmin"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(h,{to:"/profilAdmin"},{default:(0,o.w5)((()=>[i])),_:1})]),(0,o._)("button",{onClick:e[0]||(e[0]=t=>p.adminLogout()),class:"deconnexion"},"Déconnexion"),u,(0,o._)("div",d,[(0,o._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)(((...t)=>p.putAdmin&&p.putAdmin(...t)),["prevent"]))},[m,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.emailPut=e),type:"email",placeholder:"Entrer un email"},null,512),[[a.nr,t.emailPut]]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.mdpPut=e),type:"password",placeholder:"Entrer un mot de passe"},null,512),[[a.nr,t.mdpPut]]),s],32)])])}const p="https://polyrecte-serveur.herokuapp.com/",h=p+"admin";var f={name:"admin",data:()=>({idAdmin:localStorage.getItem("id"),emailPut:null,mdpPut:null}),methods:{adminLogout(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.clear(),this.$router.push("/admin")},async putAdmin(){await fetch(h+"/"+this.idAdmin,{method:"PUT",body:JSON.stringify({email:this.emailPut,mdp:this.mdpPut}),headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}}).then((t=>{t.ok?alert("Informations mises à jour!"):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la mise à jour de l'administrateur")})).catch((t=>{console.log(t)}))}}},g=n(89);const v=(0,g.Z)(f,[["render",c],["__scopeId","data-v-24ac10c1"]]);var _=v}}]);
//# sourceMappingURL=461.c39b1ca8.js.map