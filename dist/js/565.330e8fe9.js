"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[565],{6565:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});var o=n(3396),l=n(9242);const a=(0,o.Uk)("Gestion de la base de donnée"),i=(0,o.Uk)("Mettre à jour votre profil"),r=(0,o._)("hr",null,null,-1),s=(0,o._)("h3",null,"Liste des Elèves:",-1),u=["onSubmit"],d=["onUpdate:modelValue"],m=["onUpdate:modelValue"],p=(0,o._)("button",{type:"submit",class:"input"},"Mettre à jour",-1),c=["onClick"],h=(0,o._)("hr",null,null,-1),f={class:"container"},y=(0,o._)("h3",null,"Formulaire de création d'élève:",-1),_=(0,o._)("label",{for:"email"},"Email",-1),g=(0,o._)("label",{for:"prenom"},"Prénom",-1),v=(0,o._)("label",{for:"nom"},"Nom",-1),b=(0,o._)("label",{for:"mdp"},"Mot de passe",-1),w=(0,o._)("button",{type:"submit"},"Ajouter un élève",-1),k=(0,o._)("hr",null,null,-1),E=(0,o._)("h3",null,"Liste des professeurs:",-1),A=["onSubmit"],V=["onUpdate:modelValue"],S=["onUpdate:modelValue"],j=["onUpdate:modelValue"],P=(0,o._)("button",{type:"submit",class:"input"},"Mettre à jour",-1),U=["onClick"],L=(0,o._)("hr",null,null,-1),M={class:"container"},z=(0,o._)("h3",null,"Formulaire de création de professeur:",-1),x=(0,o._)("label",{for:"email"},"Email",-1),$=(0,o._)("label",{for:"prenom"},"Prénom",-1),C=(0,o._)("label",{for:"nom"},"Nom",-1),I=(0,o._)("label",{for:"mdp"},"Mot de passe",-1),D=(0,o._)("label",{for:"dateFinContrat"},"Date de fin de contrat",-1),T=(0,o._)("label",{for:"mat"},"Matiere du professeur",-1),F=(0,o._)("button",{type:"submit"},"Ajouter un professeur",-1),N=(0,o._)("hr",null,null,-1),O=(0,o._)("h3",null,"Liste des matières:",-1),J=["onSubmit"],q=["onUpdate:modelValue"],H=(0,o._)("button",{type:"submit",class:"input"},"Mettre à jour",-1),K=["onClick"],Y=(0,o._)("hr",null,null,-1),Z=(0,o._)("h3",null,"Liste des administrateurs:",-1),W=["onSubmit"],G=["onUpdate:modelValue"],B=["onUpdate:modelValue"],Q=(0,o._)("button",{type:"submit",class:"input"},"Mettre à jour",-1),R=["onClick"],X=(0,o._)("hr",null,null,-1),ee={class:"container"},te=(0,o._)("h3",null,"Formulaire de création d'administrateur:",-1),ne=(0,o._)("label",{for:"email"},"Email",-1),oe=(0,o._)("label",{for:"prenom"},"Prénom",-1),le=(0,o._)("label",{for:"nom"},"Nom",-1),ae=(0,o._)("label",{for:"mdp"},"Mot de passe",-1),ie=(0,o._)("button",{type:"submit"},"Ajouter un administrateur",-1);function re(e,t,n,re,se,ue){const de=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",null,[(0,o.Wm)(de,{to:"/loginAdmin"},{default:(0,o.w5)((()=>[a])),_:1}),(0,o.Wm)(de,{to:"/profilAdmin"},{default:(0,o.w5)((()=>[i])),_:1})]),(0,o._)("button",{onClick:t[0]||(t[0]=e=>ue.adminLogout()),class:"deconnexion"},"Déconnexion"),r,s,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.listeEleve,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e._id},[(0,o._)("li",null,[(0,o._)("form",{onSubmit:(0,l.iM)((t=>ue.putEleve(e._id,e.prenom,e.nom)),["prevent"])},[(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.prenom=t,type:"text",class:"input"},null,8,d),[[l.nr,e.prenom]])]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.nom=t,type:"text",class:"input"},null,8,m),[[l.nr,e.nom]])]),p],40,u),(0,o._)("button",{onClick:t=>ue.delEleve(e._id),type:"submit",class:"input"},"Supprimer l'élève",8,c)])])))),128)),h,(0,o._)("div",f,[(0,o._)("form",{onSubmit:t[5]||(t[5]=(0,l.iM)(((...e)=>ue.addEleve&&ue.addEleve(...e)),["prevent"])),class:"form"},[y,(0,o._)("div",null,[_,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.eleve.email=t),type:"email",required:"",placeholder:"Entrer un email"},null,512),[[l.nr,e.eleve.email]])]),(0,o._)("div",null,[g,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.eleve.prenom=t),type:"text",placeholder:"Entrer un prénom",required:""},null,512),[[l.nr,e.eleve.prenom]])]),(0,o._)("div",null,[v,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.eleve.nom=t),type:"text",placeholder:"Entrer un nom"},null,512),[[l.nr,e.eleve.nom]])]),(0,o._)("div",null,[b,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.eleve.mdp=t),type:"password",pattern:"^([ a-zA-Z0-9@ *#]{3,15})$",placeholder:"Entrer un mot de passe"},null,512),[[l.nr,e.eleve.mdp]])]),w],32)]),k,E,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.listeProf,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e._id},[(0,o._)("li",null,[(0,o._)("form",{onSubmit:(0,l.iM)((t=>ue.putProf(e._id,e.prenom,e.nom,e.dateFinContrat)),["prevent"])},[(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.prenom=t,type:"text",class:"input"},null,8,V),[[l.nr,e.prenom]])]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.nom=t,type:"text",class:"input"},null,8,S),[[l.nr,e.nom]])]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.dateFinContrat=t,type:"text",class:"input"},null,8,j),[[l.nr,e.dateFinContrat]])]),P],40,A),(0,o._)("button",{onClick:t=>ue.delProf(e._id),type:"submit",class:"input"},"Supprimer le professeur",8,U)])])))),128)),L,(0,o._)("div",M,[(0,o._)("form",{onSubmit:t[12]||(t[12]=(0,l.iM)(((...e)=>ue.addProf&&ue.addProf(...e)),["prevent"])),class:"form"},[z,(0,o._)("div",null,[x,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.prof.email=t),type:"email",required:"",placeholder:"Entrer un email"},null,512),[[l.nr,e.prof.email]])]),(0,o._)("div",null,[$,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.prof.prenom=t),type:"text",placeholder:"Entrer un prénom",required:""},null,512),[[l.nr,e.prof.prenom]])]),(0,o._)("div",null,[C,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.prof.nom=t),type:"text",placeholder:"Entrer un nom"},null,512),[[l.nr,e.prof.nom]])]),(0,o._)("div",null,[I,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[9]||(t[9]=t=>e.prof.mdp=t),type:"password",pattern:"^([ a-zA-Z0-9@ *#]{3,15})$",placeholder:"Entrer un mot de passe"},null,512),[[l.nr,e.prof.mdp]])]),(0,o._)("div",null,[D,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.prof.dateFinContrat=t),type:"text",placeholder:"Entrer une date de la forme 'JJ/MM'"},null,512),[[l.nr,e.prof.dateFinContrat]])]),(0,o._)("div",null,[T,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[11]||(t[11]=t=>e.prof.mat=t),type:"text",placeholder:"Entrer une matière"},null,512),[[l.nr,e.prof.mat]])]),F],32)]),N,O,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.listeMat,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e._id},[(0,o._)("li",null,[(0,o._)("form",{onSubmit:(0,l.iM)((t=>ue.putMat(e._id,e.nom)),["prevent"])},[(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.nom=t,type:"text",class:"input"},null,8,q),[[l.nr,e.nom]])]),H],40,J),(0,o._)("button",{onClick:t=>ue.delMat(e._id),type:"submit",class:"input"},"Supprimer la matière",8,K)])])))),128)),Y,Z,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.listeAdmin,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e._id},[(0,o._)("li",null,[(0,o._)("form",{onSubmit:(0,l.iM)((t=>ue.putAdmin(e._id,e.prenom,e.nom)),["prevent"])},[(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.prenom=t,type:"text",class:"input"},null,8,G),[[l.nr,e.prenom]])]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>e.nom=t,type:"text",class:"input"},null,8,B),[[l.nr,e.nom]])]),Q],40,W),(0,o._)("button",{onClick:t=>ue.delAdmin(e._id),type:"submit",class:"input"},"Supprimer l'administrateur",8,R)])])))),128)),X,(0,o._)("div",ee,[(0,o._)("form",{onSubmit:t[17]||(t[17]=(0,l.iM)(((...e)=>ue.addAdmin&&ue.addAdmin(...e)),["prevent"])),class:"form"},[te,(0,o._)("div",null,[ne,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[13]||(t[13]=t=>e.admin.email=t),type:"email",required:"",placeholder:"Entrer un email"},null,512),[[l.nr,e.admin.email]])]),(0,o._)("div",null,[oe,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[14]||(t[14]=t=>e.admin.prenom=t),type:"text",placeholder:"Entrer un prénom",required:""},null,512),[[l.nr,e.admin.prenom]])]),(0,o._)("div",null,[le,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[15]||(t[15]=t=>e.admin.nom=t),type:"text",placeholder:"Entrer un nom"},null,512),[[l.nr,e.admin.nom]])]),(0,o._)("div",null,[ae,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[16]||(t[16]=t=>e.admin.mdp=t),type:"password",pattern:"^([ a-zA-Z0-9@ *#]{3,15})$",placeholder:"Entrer un mot de passe"},null,512),[[l.nr,e.admin.mdp]])]),ie],32)])])}const se=top.glob,ue=se+"eleve",de=se+"prof",me=se+"admin",pe=se+"matiere";var ce={name:"admin",data:()=>({idAdmin:localStorage.getItem("idAdmin"),listeEleve:[],listeProf:[],listeMat:[],listeAdmin:[],eleve:{email:"",prenom:"",nom:"",mdp:""},prof:{email:"",prenom:"",nom:"",mdp:"",mat:""},admin:{email:"",prenom:"",nom:"",mdp:""}}),beforeMount(){try{this.getListeEleves(),this.getListeProfs(),this.getListeAdmins(),this.getListeMats()}catch{alert("test")}},methods:{adminLogout(){localStorage.removeItem("tokenAdmin"),localStorage.removeItem("idAdmin"),localStorage.clear(),this.$router.push("/admin")},async getListeEleves(){try{let e=await fetch(ue,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});if(e.ok){let t=await e.json();this.listeEleve=t.eleves}else 401==e.status?this.$router.push("/admin"):(console.log("Erreur du serveur"),alert("Le chargement des donnés n'a pas pu être fait"))}catch(e){console.log(e)}},async putEleve(e,t,n){await fetch(ue+"/"+e,{method:"PUT",body:JSON.stringify({prenom:t,nom:n}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(alert("Eleve mis à jour"),this.getListeEleves()):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la mise à jour de l'élève")})).catch((e=>{console.log(e)}))},async addEleve(){await fetch(ue,{method:"POST",body:JSON.stringify(this.eleve),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(this.getListeEleves(),this.eleve={email:"",prenom:"",nom:"",mdp:""},alert("Elève ajouté")):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de l'ajout de l'élève")}))},async delEleve(e){const t=confirm("Voulez-vous confirmez la supression?");if(t)try{let t=await fetch(ue+"/"+e,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});t.ok?(alert("Elève supprimé"),this.getListeEleves()):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la supression de l'élève")}catch(n){console.log(n)}},async getListeProfs(){try{let e=await fetch(de,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});if(e.ok){let t=await e.json();this.listeProf=t.profs}else 401==e.status?this.$router.push("/admin"):alert("Le chargement des donnés n'a pas pu être fait")}catch(e){console.log(e)}},async putProf(e,t,n,o){await fetch(de+"/"+e,{method:"PUT",body:JSON.stringify({prenom:t,nom:n,dateFinContrat:o}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(alert("Prof mis à jour"),this.getListeProfs()):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la mise à jour du professeur")})).catch((e=>{console.log(e)}))},async addProf(){await fetch(de,{method:"POST",body:JSON.stringify(this.prof),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(this.getListeProfs(),this.getListeMats(),this.prof={email:"",prenom:"",nom:"",mdp:"",mat:""},alert("Professeur ajouté")):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de l'ajout du professeur (la matière ou le professeur doivent être unique)")})).catch((e=>{console.log(e)}))},async delProf(e){const t=confirm("Voulez-vous confirmez la supression?");if(t)try{let t=await fetch(de+"/"+e,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});t.ok?(alert("Professeur supprimé"),this.getListeProfs()):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la supression du professeur")}catch(n){console.log(n)}},async getListeMats(){try{let e=await fetch(pe,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});if(e.ok){let t=await e.json();this.listeMat=t.mats}else 401==e.status?this.$router.push("/admin"):alert("Le chargement des donnés n'a pas pu être fait")}catch(e){console.log(e)}},async putMat(e,t){await fetch(pe+"/"+e,{method:"PUT",body:JSON.stringify({nom:t}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(alert("Matière mis à jour"),this.getListeMats()):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de l'ajout de la matière")})).catch((e=>{console.log(e)}))},async delMat(e){const t=confirm("Voulez-vous confirmez la supression?");if(t)try{let t=await fetch(pe+"/"+e,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});t.ok?(alert("Matière supprimée"),this.getListeMats()):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la supression de la matière")}catch(n){console.log(n)}},async getListeAdmins(){try{let e=await fetch(me,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});if(e.ok){let t=await e.json();this.listeAdmin=t.admins}else 401==e.status?this.$router.push("/admin"):(console.log("Erreur du serveur"),alert("Le chargement des donnés n'a pas pu être fait"))}catch(e){console.log(e)}},async putAdmin(e,t,n){await fetch(me+"/"+e,{method:"PUT",body:JSON.stringify({prenom:t,nom:n}),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(alert("Admin mis à jour"),this.getListeAdmins()):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la mise à jour de l'administrateur")}))},async addAdmin(){await fetch(me+"/creer/"+this.idAdmin,{method:"POST",body:JSON.stringify(this.admin),headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}}).then((e=>{e.ok?(this.getListeAdmins(),this.admin={email:"",prenom:"",nom:"",mdp:""},alert("Administrateur ajouté")):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de l'ajout")})).catch((e=>{console.log(e)}))},async delAdmin(e){const t=confirm("Voulez-vous confirmez la supression?");if(t)try{let t=await fetch(me+"/"+e+"/"+this.idAdmin,{method:"DELETE",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenAdmin")}});t.ok?(alert("Administrateur supprimé"),this.getListeAdmins()):401==t.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/admin")):alert("Problème lors de la supression de l'administrateur (il doit toujours exister au moins un admin!)")}catch(n){console.log(n)}}}},he=n(89);const fe=(0,he.Z)(ce,[["render",re]]);var ye=fe}}]);
//# sourceMappingURL=565.330e8fe9.js.map