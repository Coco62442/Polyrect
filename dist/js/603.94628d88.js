"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[603],{6603:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var n=o(3396),r=o(9242),l=o(7139);const s=(0,n.Uk)("Ajouter des Notes"),a=(0,n.Uk)("Modifier des Notes"),i=(0,n.Uk)("Ajouter des Absences"),u=(0,n.Uk)("Modifier des Absences"),c=(0,n.Uk)("Mettre à jour votre profil"),d=["onUpdate:modelValue"],p=(0,n._)("label",null,"Numéro du contrôle: ",-1),f=(0,n._)("input",{class:"input",type:"submit",id:"submit",value:"Valider"},null,-1);function m(e,t,o,m,g,h){const b=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("nav",null,[(0,n.Wm)(b,{to:"/loginProf"},{default:(0,n.w5)((()=>[s])),_:1}),(0,n.Wm)(b,{to:"/modifNote"},{default:(0,n.w5)((()=>[a])),_:1}),(0,n.Wm)(b,{to:"/ajoutAbsence"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(b,{to:"/modifAbsence"},{default:(0,n.w5)((()=>[u])),_:1}),(0,n.Wm)(b,{to:"/profilProf"},{default:(0,n.w5)((()=>[c])),_:1})]),(0,n._)("button",{onClick:t[0]||(t[0]=e=>h.profLogout()),class:"deconnexion"},"Déconnexion"),(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>h.creerNotes&&h.creerNotes(...e)),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.listeEleve,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{key:t._id},[(0,n._)("li",null,[(0,n._)("p",null,(0,l.zw)(t.prenom)+" "+(0,l.zw)(t.nom),1),(0,n.wy)((0,n._)("input",{class:"input","onUpdate:modelValue":t=>e.note[o]=t,type:"number",min:"0",max:"20",style:{width:"200px"},id:"note",placeholder:"Entrer la note"},null,8,d),[[r.nr,e.note[o]]])])])))),128)),(0,n._)("div",null,[p,(0,n.wy)((0,n._)("input",{class:"input","onUpdate:modelValue":t[1]||(t[1]=t=>e.num=t),type:"number",min:"1",style:{width:"200px"},id:"num",placeholder:"Entrer le numéro du contrôle"},null,512),[[r.nr,e.num]])]),f],32)])}const g=top.glob.serv,h=g+"eleve",b=g+"matiere",v=g+"note";var w={name:"prof",data:()=>({idProf:localStorage.getItem("idProf"),idMat:String,listeEleve:[],note:[],num:Number}),beforeMount(){this.getListeEleves(),this.getIdMat()},methods:{profLogout(){localStorage.removeItem("tokenProf"),localStorage.removeItem("idProf"),localStorage.clear(),this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")},async getListeEleves(){try{let e=await fetch(h,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});if(e.ok){let t=await e.json();this.listeEleve=t.eleves}else 401==e.status?(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")):(console.log("Erreur du serveur"),top.glob.toast("Le chargement des donnés n'a pas pu être fait","danger"))}catch(e){console.log(e),top.glob.toast("Erreur","danger")}},async getIdMat(){try{let e=await fetch(b+"/"+this.idProf,{headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")}});if(e.ok){let t=await e.json();this.idMat=t.mat._id}else 401==e.status?this.$router.push("/prof"):(console.log("Erreur du serveur"),top.glob.toast("Le chargement des donnés n'a pas pu être fait","warning"))}catch(e){console.log(e),top.glob.toast("Erreur","danger")}},async creerNotes(){var e=0;for(let o=0;o<this.listeEleve.length;o++)try{let t=await fetch(v,{method:"POST",headers:{"content-type":"application/json",authorization:localStorage.getItem("tokenProf")},body:JSON.stringify({note:this.note[o],matiere:this.idMat,eleve:this.listeEleve[o]._id,num:this.num})});t.ok?this.note[o]="":401==t.status?(this.$router.push("/prof"),top.glob.toast("Vous êtes déconnecté","info")):e+=1}catch(t){console.log(t),top.glob.toast("Erreur","danger")}e?top.glob.toast("Problème de création là où le formulaire n'est pas vide (Potentiellement le numéro de contrôle existe déjà).","warning"):(top.glob.toast("Enregistrement efféctué avec succès!","default"),this.num="")}}},y=o(89);const k=(0,y.Z)(w,[["render",m]]);var _=k}}]);
//# sourceMappingURL=603.94628d88.js.map