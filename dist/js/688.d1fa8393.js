"use strict";(self["webpackChunkpolyrecte"]=self["webpackChunkpolyrecte"]||[]).push([[688],{3688:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var r=o(3396),l=o(9242);const n=(0,r.Uk)("Ajouter des Notes"),s=(0,r.Uk)("Modifier des Notes"),a=(0,r.Uk)("Ajouter des Absences"),u=(0,r.Uk)("Modifier des Absences"),i=(0,r.Uk)("Mettre à jour votre profil"),p={class:"container"},d=(0,r._)("h4",null,"Formulaire pour mettre à jour tes informations:",-1),m=(0,r._)("label",{for:"emailPut"},"Email",-1),c=(0,r._)("label",{for:"mdpPut"},"Mot de passe",-1),f=(0,r._)("button",{type:"submit"},"Mettre à jour",-1);function h(e,t,o,h,P,_){const k=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("nav",null,[(0,r.Wm)(k,{to:"/loginProf"},{default:(0,r.w5)((()=>[n])),_:1}),(0,r.Wm)(k,{to:"/modifNote"},{default:(0,r.w5)((()=>[s])),_:1}),(0,r.Wm)(k,{to:"/ajoutAbsence"},{default:(0,r.w5)((()=>[a])),_:1}),(0,r.Wm)(k,{to:"/modifAbsence"},{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(k,{to:"/profilProf"},{default:(0,r.w5)((()=>[i])),_:1})]),(0,r._)("button",{onClick:t[0]||(t[0]=e=>_.profLogout()),class:"deconnexion"},"Déconnexion"),(0,r._)("div",p,[d,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,l.iM)(((...e)=>_.putProf&&_.putProf(...e)),["prevent"])),class:"form"},[(0,r._)("div",null,[m,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.emailPut=t),type:"email",placeholder:"Entrer un email"},null,512),[[l.nr,e.emailPut]])]),(0,r._)("div",null,[c,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.mdpPut=t),type:"password",placeholder:"Entrer un mot de passe"},null,512),[[l.nr,e.mdpPut]])]),f],32)])])}const P="http:localhost/4000/",_=P+"prof";var k={name:"profProfil",data:()=>({id:localStorage.getItem("id"),emailPut:null,mdpPut:null,prof:[],error:""}),methods:{profLogout(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.clear(),this.$router.push("/prof")},async putProf(){await fetch(_+"/"+this.id,{method:"PUT",body:JSON.stringify({email:this.emailPut,mdp:this.mdpPut}),headers:{"content-type":"application/json",authorization:localStorage.getItem("token")}}).then((e=>{e.ok?e.json().then((e=>{if(e.details){const t=e.details.map((e=>e.prof)).join(". ");this.error=t}else this.error="",this.showProfForm=!1,this.profs.push(e)})):401==e.status?(alert("Vous n'êtes plus connecté"),this.$router.push("/prof")):alert("Les informations n'ont pas pu être mises à jour")})).catch((e=>{console.log(e)}))}}},b=o(89);const g=(0,b.Z)(k,[["render",h]]);var w=g}}]);
//# sourceMappingURL=688.d1fa8393.js.map